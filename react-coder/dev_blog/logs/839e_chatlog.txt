
---
REQUEST:
You are a router for a code-editing system. Given the user's instruction, choose exactly one workflow.

User instruction: "Change the color of the Add Todo button to Blue"

Available workflows:
- simple_modification: Basic file identification and single-pass modification. Best for simple styling, text changes, or single-component edits. (complexity: simple)
- explorative_modification: Advanced workflow using tool-based exploration. LLM explores codebase with grep/search tools and makes targeted edits. Best for complex multi-file changes. (complexity: advanced)

Respond with a JSON object only, no other text:
{"workflow": "<name>", "reason": "<one short sentence>"}

Use exactly one of these workflow names: simple_modification, explorative_modification.

RESPONSE:
{"workflow":"simple_modification","reason":"This is a straightforward styling change affecting a single button, suitable for a basic single-pass modification."}

---
REQUEST:
You are analyzing a Vite/React/Tailwind CSS codebase to determine which files need to be modified.

Project Structure:
            Total files: 16
            Files by type: {'css': 1, 'jsx': 13, 'js': 2}

            File Tree:
            ├── src/
  ├── App.jsx (0.4KB) - Functions: App
  ├── components/
    ├── CallToAction.jsx (0.4KB) - Functions: CallToAction
    ├── HeroImage.jsx (2.1KB) - Functions: HeroImage
    ├── ScrollToTop.jsx (0.3KB) - Functions: ScrollToTop
    ├── TodoApp.jsx (5.4KB) - Functions: TodoApp
    ├── TodoForm.jsx (1.4KB) - Functions: TodoForm
    ├── TodoItem.jsx (4.8KB) - Functions: TodoItem
    ├── WelcomeMessage.jsx (0.4KB) - Functions: WelcomeMessage
    ├── ui/
      ├── button.jsx (1.5KB) - Functions: Button, Comp
      ├── toast.jsx (3.7KB) - Functions: Toast, ToastAction, ToastClose, ToastDescription, ToastProvider
      ├── toaster.jsx (0.7KB) - Functions: Toaster
      ├── use-toast.js (2.0KB)
  ├── index.css (0.3KB)
  ├── lib/
    ├── utils.js (0.1KB)
  ├── main.jsx (0.2KB)
  ├── pages/
    ├── HomePage.jsx (1.2KB) - Functions: HomePage
            

User instruction: "Change the color of the Add Todo button to Blue"

Analyze the instruction and file structure. Identify which files need to be modified to fulfill this instruction.

Guidelines:
- Be selective - only include files that will actually change
- Consider component hierarchy and imports
- For styling changes, include relevant CSS files
- For component changes, include the component file and possibly parent files

Return ONLY a JSON array of file paths, like: ["src/App.jsx", "src/styles.css"]
No explanation, just the JSON array.


RESPONSE:
["src/components/TodoForm.jsx"]

---
REQUEST:
You are modifying a React codebase based on user instructions.

User instruction: "Change the color of the Add Todo button to Blue"

Current files:

FILE: components/TodoForm.jsx
================================================================================

import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { Plus } from 'lucide-react';

const TodoForm = ({ onAddTodo }) => {
  const [inputValue, setInputValue] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    const trimmedValue = inputValue.trim();
    
    if (trimmedValue) {
      onAddTodo(trimmedValue);
      setInputValue('');
    }
  };

  return (
    <form onSubmit={handleSubmit} className="w-full">
      <div className="flex gap-2">
        <input
          type="text"
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          placeholder="What needs to be done?"
          className="flex-1 px-4 py-3 bg-red-50 text-gray-900 placeholder-gray-400 rounded-lg border-2 border-red-200 focus:border-red-500 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all duration-200"
        />
        <motion.button
          type="submit"
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          className="px-6 py-3 bg-black hover:bg-gray-800 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2"
        >
          <Plus size={20} />
          <span className="hidden sm:inline">Add Todo</span>
        </motion.button>
      </div>
    </form>
  );
};

export default TodoForm;

================================================================================


Modify the files according to the instruction. 

IMPORTANT:
- Return the COMPLETE modified content for EACH file
- Do NOT return partial files or just the changes
- Maintain proper syntax (React/JavaScript/CSS)
- Keep all existing code that isn't affected by the instruction
- Ensure imports and exports are correct

Return your response as a JSON object where keys are file paths and values are the complete new file contents:

{
  "src/App.jsx": "complete file content here...",
  "src/styles.css": "complete file content here..."
}

Return ONLY the JSON object. No explanation or markdown formatting.


RESPONSE:
{
  "components/TodoForm.jsx": "import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { Plus } from 'lucide-react';

const TodoForm = ({ onAddTodo }) => {
  const [inputValue, setInputValue] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    const trimmedValue = inputValue.trim();
    
    if (trimmedValue) {
      onAddTodo(trimmedValue);
      setInputValue('');
    }
  };

  return (
    <form onSubmit={handleSubmit} className=\"w-full\">
      <div className=\"flex gap-2\">
        <input
          type=\"text\"
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          placeholder=\"What needs to be done?\"
          className=\"flex-1 px-4 py-3 bg-red-50 text-gray-900 placeholder-gray-400 rounded-lg border-2 border-red-200 focus:border-red-500 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all duration-200\"
        />
        <motion.button
          type=\"submit\"
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          className=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-500/20\"
        >
          <Plus size={20} />
          <span className=\"hidden sm:inline\">Add Todo</span>
        </motion.button>
      </div>
    </form>
  );
};

export default TodoForm;
"
}

---
REQUEST:
You are a router for a code-editing system. Given the user's instruction, choose exactly one workflow.

User instruction: "Now add a Projects page ( use React Router ), we want to manage projects in there, also when adding Todo Items we should be able to select a project. Projects should also be visible as tags next to each Todo"

Available workflows:
- simple_modification: Basic file identification and single-pass modification. Best for simple styling, text changes, or single-component edits. (complexity: simple)
- explorative_modification: Advanced workflow using tool-based exploration. LLM explores codebase with grep/search tools and makes targeted edits. Best for complex multi-file changes. (complexity: advanced)

Respond with a JSON object only, no other text:
{"workflow": "<name>", "reason": "<one short sentence>"}

Use exactly one of these workflow names: simple_modification, explorative_modification.

RESPONSE:
{"workflow":"explorative_modification","reason":"Adding a routed Projects page plus shared project management and updating Todo forms/tags requires multi-file exploration and targeted edits."}

---
REQUEST:
[USER]
You are an expert code modification agent working on a React codebase.

TASK: Now add a Projects page ( use React Router ), we want to manage projects in there, also when adding Todo Items we should be able to select a project. Projects should also be visible as tags next to each Todo

CODEBASE PATH: /Users/rafael/workspace/hostinger/sample-react-projects/react-coder/temp_sessions/50bc5a3c-585d-4003-b264-d6f33f555c63/src

INITIAL FILE TREE:
├── src/
  ├── App.jsx
  ├── components/
    ├── CallToAction.jsx
    ├── HeroImage.jsx
    ├── ScrollToTop.jsx
    ├── TodoApp.jsx
    ├── TodoForm.jsx
    ├── TodoItem.jsx
    ├── WelcomeMessage.jsx
    ├── ui/
      ├── button.jsx
      ├── toast.jsx
      ├── toaster.jsx
      ├── use-toast.js
  ├── index.css
  ├── lib/
    ├── utils.js
  ├── main.jsx
  ├── pages/
    ├── HomePage.jsx

AVAILABLE TOOLS:
You can use the following tools to explore and modify the codebase. Return your response as JSON.

1. list_files
   List files in a directory
   Parameters: {"directory": "relative/path", "pattern": "*.jsx" (optional)}

2. grep_code
   Search for text patterns in files
   Parameters: {"pattern": "search text or regex", "file_pattern": "*.jsx" (optional), "context_lines": 2 (optional)}

3. search_symbol
   Find where a function/variable is defined or used
   Parameters: {"symbol": "functionName", "search_type": "definition" or "usage"}

4. read_file_lines
   Read specific lines from a file
   Parameters: {"file_path": "relative/path/to/file.jsx", "start_line": 1, "end_line": 50}

5. get_file_structure
   Get outline of a file (imports and function signatures only, no implementation)
   Parameters: {"file_path": "relative/path/to/file.jsx"}

6. apply_edit
   Apply a targeted edit to a file (str_replace pattern - finds exact match and replaces)
   Parameters: {"file_path": "path", "old_str": "exact string to replace", "new_str": "replacement"}

RESPONSE FORMAT:
You must respond with valid JSON in one of two formats:

Format 1 - Using tools:
{
  "thought": "explanation of what you're doing",
  "tool_calls": [
    {"tool": "tool_name", "parameters": {...} },
    {"tool": "another_tool", "parameters": {...} }
  ]
}

Format 2 - When finished:
{
  "done": true,
  "message": "summary of changes made"
}

WORKFLOW SUGGESTIONS:
1. Start by exploring the codebase with list_files, grep_code, or get_file_structure
2. Read specific file sections with read_file_lines when you need to see implementation
3. Use search_symbol to find function definitions and usages
4. Once you understand the code, use apply_edit to make targeted changes
5. When all changes are complete, return {"done": true}

IMPORTANT:
- Be thorough but efficient - explore only what you need
- Use apply_edit for all modifications (don't suggest changes, make them)
- apply_edit uses exact string matching - make sure old_str matches exactly
- You can make multiple edits in one response
- When done, summarize what you changed

Begin by exploring the codebase to understand what needs to change.


RESPONSE:
{"thought":"Listing files in src and components/pages to understand structure","tool_calls":[{"tool":"list_files","parameters":{"directory":"src"}},{"tool":"list_files","parameters":{"directory":"src/components"}},{"tool":"list_files","parameters":{"directory":"src/pages"}}]}
(Note: I'm waiting for tool outputs.)
